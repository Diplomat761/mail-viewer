# Просмотр электронной почты

Приложение на Node.js для просмотра и отправки электронной почты.

## Установка

1. Клонируйте репозиторий или скопируйте файлы
2. Установите зависимости:
```
npm install
```

## Конфигурация

Создайте файл `.env` в корне проекта со следующими данными:
```
EMAIL=borisova@vnukm.com
PASSWORD=ваш_пароль
IMAP_HOST=mail.1vps.tech
IMAP_PORT=993
PORT=3000
```

## Функциональность

### Веб-интерфейс

Для запуска веб-интерфейса выполните:
```
npm start
```

Или в режиме разработки:
```
npm run dev
```

Затем откройте браузер и перейдите по адресу `http://localhost:3000`

В веб-интерфейсе вы можете:
- Просматривать входящие письма
- Отправлять новые письма с вложениями
- Читать содержимое писем и скачивать вложения

### Консольное приложение

#### Просмотр писем

Для запуска просмотра писем в консоли выполните:
```
npm run mail
```
или
```
node index.js
```

Это приложение:
- Проверяет входящие письма (INBOX) за последние 7 дней
- Выводит основную информацию о письмах (отправитель, получатель, тема, дата, содержимое)
- Сохраняет вложения в папку `attachments` (создается автоматически)

#### Отправка писем

Для отправки письма из консоли используйте:
```
npm run send -- получатель@пример.com "Тема письма" "Текст письма" [пути_к_вложениям]
```
или
```
node send-email.js получатель@пример.com "Тема письма" "Текст письма" [пути_к_вложениям]
```

Примеры:
```
# Отправка письма без вложений
node send-email.js friend@example.com "Привет" "Как дела?"

# Отправка письма с вложениями
node send-email.js colleague@example.com "Отчет" "Высылаю отчет" ./report.pdf ./data.xlsx
```

## Требования

- Node.js 12.x или выше 

## Запуск в продакшене

Для запуска приложения в производственной среде используйте процесс-менеджер PM2, который обеспечивает:
- Работу в фоновом режиме
- Автоматический перезапуск при сбоях
- Управление логами
- Мониторинг производительности

### Подготовка

1. Установите PM2 глобально:
```
npm install -g pm2
```

2. Создайте файл `.env` с настройками для продакшена
```
PORT=4000
NODE_ENV=production
EMAIL=your@email.com
PASSWORD=your_password
IMAP_HOST=your.imap.server
IMAP_PORT=993
```

### Запуск с PM2

Для запуска приложения в продакшене:
```
npm run pm2-start
```

Для перезапуска приложения:
```
npm run pm2-restart
```

Для остановки приложения:
```
npm run pm2-stop
```

### Мониторинг

Просмотр статуса приложения:
```
pm2 status
```

Просмотр логов:
```
pm2 logs mail-viewer
```

Мониторинг в реальном времени:
```
pm2 monit
```

### Запуск при старте системы

Настройка автозапуска PM2 при перезагрузке сервера:
```
pm2 startup
pm2 save
``` # mail-viewer
